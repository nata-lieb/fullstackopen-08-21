(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var r=t(15),a=t.n(r),c=t(6),o=t(3),i=t(1),u=t(0),d=function(e){var n=e.filter,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},s=function(e){var n=e.addPerson,t=e.name,r=e.number,a=e.handleNameChange,c=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:a})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.persons,t=e.removePerson;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number," ",Object(u.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))})},j=function(e){var n=e.message;if(!n.text)return null;var t={background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px",color:n.error?"red":"green"};return Object(u.jsx)("div",{style:t,children:n.text})},f=t(4),l=t.n(f),h="/api/persons",m={text:"",error:!1},O=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(i.useState)(""),f=Object(o.a)(a,2),O=f[0],x=f[1],v=Object(i.useState)(""),p=Object(o.a)(v,2),g=p[0],w=p[1],C=Object(i.useState)(""),k=Object(o.a)(C,2),y=k[0],S=k[1],N=Object(i.useState)(m),P=Object(o.a)(N,2),E=P[0],I=P[1];Object(i.useEffect)((function(){l.a.get(h).then((function(e){r(e.data)}))}),[]),Object(i.useEffect)((function(){E.text&&setTimeout((function(){I(m)}),5e3)}),[E]);var B=""===y?t:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(j,{message:E}),Object(u.jsx)(d,{filter:y,handleFilterChange:function(e){return S(e.target.value)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(s,{addPerson:function(e){e.preventDefault();var n,a=t.find((function(e){return e.name===O}));a?window.confirm("".concat(a.name," is already added to phonebook, replace the old number with a new one?"))&&(n=Object(c.a)(Object(c.a)({},a),{},{number:g}),l.a.put("".concat(h,"/").concat(n.id),n)).then((function(e){r(t.map((function(n){return n.id===a.id?e.data:n}))),x(""),w(""),I({text:"Updated ".concat(e.data.name),error:!1})})).catch((function(){I({text:"Information of ".concat(a.name," has already been removed from server"),error:!0}),r(t.filter((function(e){return e.id!==a.id})))})):function(e){return l.a.post(h,e)}({name:O,number:g}).then((function(e){r(t.concat(e.data)),x(""),w(""),I({text:"Added ".concat(e.data.name),error:!1})}))},name:O,number:g,handleNameChange:function(e){return x(e.target.value)},handleNumberChange:function(e){return w(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(b,{persons:B,removePerson:function(e){var n=t.find((function(n){return n.id===e}));e&&window.confirm("Delete ".concat(n.name,"?"))&&function(e){return l.a.delete("".concat(h,"/").concat(e))}(e).then((function(n){204===n.status&&r(t.filter((function(n){return n.id!==e})))})).catch((function(){I({text:"Information of ".concat(n.name," has already been removed from server"),error:!0}),r(t.filter((function(n){return n.id!==e})))}))}})]})};a.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.dd14bdbe.chunk.js.map